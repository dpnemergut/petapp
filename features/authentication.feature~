Given /^I register new user$/ do
visit new_user_path
end
When /^I create a new user$/ do |table|
table.hashes.first.each do |field, value|
fill_in field, :with => value
end
click_button 'Register'
end
Then /^I should be logged in as "(.*?)"$/ do |name|
page.should have_content "Name: #{name}"
end
Given /^Existing accounts$/ do |table|
table.hashes.each {|user| User.create(user) }
end
When /^I login with "(.*?)" \- "(.*?)"$/ do |login, pass|
@my_login = login
visit new_user_session_path
fill_in 'Login', :with => login
fill_in 'Password', :with => pass
click_button 'Login'
end
def current_user
User.where(:login => @my_login).first
end
